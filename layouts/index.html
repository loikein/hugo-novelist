{{ define "main" }}

{{- .Content -}}

<p>Browse by:</p>
<ul>
  <li><a href="/fandoms/">Fandoms</a></li>
  <li><a href="/characters/">Characters</a></li>
  <li><a href="/tags/">Tags</a></li>
</ul>
<p>Or see everything:</p>

<!-- <h2><a href="/writing/">Writing</a></h2> -->
<h2>Writing</h2>
{{/*
  https://discourse.gohugo.io/t/how-to-select-both-pages-and-sections-on-the-same-level/17205/7
*/}}
{{- $writings := slice -}}
{{- range (where .Site.Pages "Section" "writing" ) -}}
  {{ if eq (print .Parent) (print ($.Site.GetPage "writing")) }}
    <!-- this means that the page is directly below software -->
    <!-- therefore add the page to the $posts list -->
    {{ $writings = $writings | append . }}
  {{ end }}
{{- end -}}

<ul class="list writing">
  {{ range (sort $writings "Date" "desc") }}
  <li>
  <a href="{{ .Params.externalLink | default .RelPermalink }}">{{ .Title }}</a>
  {{- partial "ratings.html" . -}}
  {{- partial "meta.html" . -}}
  </li>
  {{- end -}}
</ul>

{{ end }}
