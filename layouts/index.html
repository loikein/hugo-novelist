{{ define "main" }}

{{- .Content -}}

<p>Browse by:</p>
<ul aria-label="Article categories">
  <li><a href="/fandoms/">Fandoms</a></li>
  <li><a href="/characters/">Characters</a></li>
  <li><a href="/tags/">Tags</a></li>
</ul>
<p>Or by sections:</p>

{{/* "writing" */}}
{{/*
  https://discourse.gohugo.io/t/how-to-select-both-pages-and-sections-on-the-same-level/17205/7
*/}}
{{- $writings := slice -}}
{{- range (where .Site.Pages "Section" "writing" ) -}}
  {{- if eq (print .Parent) (print ($.Site.GetPage "writing")) -}}
    {{/* this means that the page (or section) is directly below "writing" */}}
    {{/* therefore add it to the $posts list */}}
    {{- $writings = $writings | append . -}}
  {{- end -}}
{{- end -}}
<h2><a href="/writing/">Writing ({{ $writings | len }})</a></h2>

<p>Newest entries:</p>

<ul class="list writing">
  {{- range first 5 (sort $writings "Date" "desc") -}}
  <li>
  <a href="{{ .Params.externalLink | default .RelPermalink }}">{{ .Title }}</a>
  {{- partial "ratings.html" . -}}
  {{- partial "meta.html" . -}}
  </li>
  {{- end -}}
</ul>
{{/* end of "writing" */}}

{{ end }}{{/* end of "main" */}}
